{"version":3,"sources":["../../server/server-route-utils.ts"],"names":["Header","Redirect","Rewrite","RouteType","Route","BaseNextRequest","ParsedUrlQuery","getRedirectStatus","modifyRouteRegex","pathMatch","compileNonPath","prepareDestination","getRequestMeta","stringifyQs","stringify","formatUrl","format","normalizeRepeatedSlashes","getCustomRouteMatcher","getCustomRoute","type","rule","restrictedRedirectPaths","match","source","internal","regex","undefined","name","fn","_req","_res","_params","_parsedUrl","finished","createHeaderRoute","headerRoute","has","res","params","hasParams","Object","keys","length","header","headers","key","value","setHeader","createRedirectRoute","redirectRoute","statusCode","req","parsedUrl","parsedDestination","appendParamsToQuery","destination","query","search","stringifyQuery","updatedDestination","startsWith","redirect","body","send","initialQuery","initialQueryValues","values","encodeURIComponent","some","initialQueryVal","Array","isArray","includes"],"mappings":"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"}